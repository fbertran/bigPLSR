<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Benchmarking PLS1 Implementations • bigPLSR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Benchmarking PLS1 Implementations">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bigPLSR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.6.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/auto-backend.html">Auto backend usage</a></li>
    <li><a class="dropdown-item" href="../articles/pls1-benchmark.html">Benchmarking PLS1 Implementations</a></li>
    <li><a class="dropdown-item" href="../articles/pls2-benchmark.html">Benchmarking PLS2 Implementations</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fbertran/bigPLSR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Benchmarking PLS1 Implementations</h1>
                        <h4 data-toc-skip class="author">Frédéric
Bertrand</h4>
            <address class="author_afil">
      Cedric, Cnam,
Paris<br><a class="author_email" href="mailto:#"></a><a href="mailto:frederic.bertrand@lecnam.net" class="email">frederic.bertrand@lecnam.net</a>
      </address>
                  
            <h4 data-toc-skip class="date">2025-11-07</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/fbertran/bigPLSR/blob/HEAD/vignettes/pls1-benchmark.Rmd" class="external-link"><code>vignettes/pls1-benchmark.Rmd</code></a></small>
      <div class="d-none name"><code>pls1-benchmark.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fbertran.github.io/bigPLSR/">bigPLSR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/kaneplusplus/bigmemory" class="external-link">bigmemory</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://bench.r-lib.org/" class="external-link">bench</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>This vignette illustrates how to benchmark the dense and streaming
implementations provided for single-response partial least squares
regression (PLS1). The dense implementation (<code>pls1_dense</code>)
copies the predictor matrix in memory and should therefore be preferred
when the whole dataset fits in RAM. The streaming implementation
(<code>pls1_stream</code>) iterates over the data in blocks, enabling
analyses of larger-than-memory workloads.</p>
</div>
<div class="section level2">
<h2 id="simulated-data">Simulated data<a class="anchor" aria-label="anchor" href="#simulated-data"></a>
</h2>
<p>We generate a moderately sized synthetic datasets with a low
dimensional latent structure. The predictors are stored in a
<code><a href="https://rdrr.io/pkg/bigmemory/man/big.matrix.html" class="external-link">bigmemory::big.matrix</a></code> so they can be reused without
additional copies during the benchmarks.</p>
<p>Here is an example with <code>n=4000</code> en <code>p=50</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">n</span> <span class="op">&lt;-</span> <span class="fl">1000</span></span>
<span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fl">50</span></span>
<span><span class="va">ncomp</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span></span>
<span><span class="va">X</span> <span class="op">&lt;-</span> <span class="fu">bigmemory</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bigmemory/man/big.matrix.html" class="external-link">big.matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="va">n</span>, ncol <span class="op">=</span> <span class="va">p</span>, type <span class="op">=</span> <span class="st">"double"</span><span class="op">)</span></span>
<span><span class="va">X</span><span class="op">[</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="va">p</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span></span>
<span><span class="va">true_beta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">y_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">X</span><span class="op">[</span>,<span class="op">]</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">true_beta</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">bigmemory</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bigmemory/man/big.matrix.html" class="external-link">big.matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="va">n</span>, ncol <span class="op">=</span> <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"double"</span><span class="op">)</span></span>
<span><span class="va">y</span><span class="op">[</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="va">y_vec</span></span>
<span></span>
<span><span class="va">X</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span></span>
<span><span class="co">#&gt;             [,1]        [,2]       [,3]        [,4]       [,5]       [,6]</span></span>
<span><span class="co">#&gt; [1,] -0.56047565 -0.99579872 -0.5116037 -0.15030748  0.1965498 -0.4941739</span></span>
<span><span class="co">#&gt; [2,] -0.23017749 -1.03995504  0.2369379 -0.32775713  0.6501132  1.1275935</span></span>
<span><span class="co">#&gt; [3,]  1.55870831 -0.01798024 -0.5415892 -1.44816529  0.6710042 -1.1469495</span></span>
<span><span class="co">#&gt; [4,]  0.07050839 -0.13217513  1.2192276 -0.69728458 -1.2841578  1.4810186</span></span>
<span><span class="co">#&gt; [5,]  0.12928774 -2.54934277  0.1741359  2.59849023 -2.0261096  0.9161912</span></span>
<span><span class="co">#&gt; [6,]  1.71506499  1.04057346 -0.6152683 -0.03741501  2.2053261  0.3351310</span></span>
<span><span class="va">y</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">6</span>,<span class="op">]</span></span>
<span><span class="co">#&gt; [1] -1.30750385 -0.31942974  0.78534055  0.95482632 -0.64407070 -0.04507161</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="benchmark-results">Benchmark results<a class="anchor" aria-label="anchor" href="#benchmark-results"></a>
</h2>
<p>The <code>bench</code> package provides a convenient framework to
compare the runtime characteristics of both solvers. The following
benchmark uses a chunk size of 1024 rows for the streaming variant,
which offers a good trade-off between speed and memory usage for this
dataset size.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bench_res_simpls</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://bench.r-lib.org/reference/press.html" class="external-link">press</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">5000</span><span class="op">)</span>,</span>
<span>  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">1000</span><span class="op">)</span>,</span>
<span>  <span class="op">{</span></span>
<span>    <span class="va">ncomp</span> <span class="op">=</span> <span class="fl">5</span></span>
<span>    <span class="va">rep</span> <span class="op">=</span> <span class="fl">1</span></span>
<span>    <span class="va">algorithm</span> <span class="op">=</span> <span class="st">"simpls"</span></span>
<span>    <span class="va">X</span> <span class="op">&lt;-</span> <span class="fu">bigmemory</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bigmemory/man/big.matrix.html" class="external-link">big.matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="va">n</span>, ncol <span class="op">=</span> <span class="va">p</span>, type <span class="op">=</span> <span class="st">"double"</span><span class="op">)</span></span>
<span>    <span class="va">X</span><span class="op">[</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="va">p</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">true_beta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="va">y_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">X</span><span class="op">[</span>,<span class="op">]</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">true_beta</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">bigmemory</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bigmemory/man/big.matrix.html" class="external-link">big.matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="va">n</span>, ncol <span class="op">=</span> <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"double"</span><span class="op">)</span></span>
<span>    <span class="va">y</span><span class="op">[</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="va">y_vec</span></span>
<span>    <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="https://bench.r-lib.org/reference/mark.html" class="external-link">mark</a></span><span class="op">(</span></span>
<span>      dense <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense.html">pls1_dense</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y_vec</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      streaming <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense.html">pls1_stream</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y_vec</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, chunk_size <span class="op">=</span> <span class="fl">1024L</span>, </span>
<span>                              algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      dense_a <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense_a.html">pls1_dense_a</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      streaming_a <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense_a.html">pls1_stream_a</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, chunk_size <span class="op">=</span> <span class="fl">1024L</span>, </span>
<span>                                  algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      dense_ya <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense_ya.html">pls1_dense_ya</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      streaming_ya <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense_ya.html">pls1_stream_ya</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, chunk_size <span class="op">=</span> <span class="fl">1024L</span>, </span>
<span>                                    algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      iterations <span class="op">=</span> <span class="fl">10</span>,</span>
<span>      check <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span>  </span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bench_res_nipals</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://bench.r-lib.org/reference/press.html" class="external-link">press</a></span><span class="op">(</span></span>
<span>  n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">500</span>, <span class="fl">1000</span>, <span class="fl">5000</span><span class="op">)</span>,</span>
<span>  p <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">500</span>, <span class="fl">1000</span><span class="op">)</span>,</span>
<span>  <span class="op">{</span></span>
<span>    <span class="va">ncomp</span> <span class="op">=</span> <span class="fl">5</span></span>
<span>    <span class="va">rep</span> <span class="op">=</span> <span class="fl">1</span></span>
<span>    <span class="va">algorithm</span> <span class="op">=</span> <span class="st">"nipals"</span></span>
<span>    <span class="va">X</span> <span class="op">&lt;-</span> <span class="fu">bigmemory</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bigmemory/man/big.matrix.html" class="external-link">big.matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="va">n</span>, ncol <span class="op">=</span> <span class="va">p</span>, type <span class="op">=</span> <span class="st">"double"</span><span class="op">)</span></span>
<span>    <span class="va">X</span><span class="op">[</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span> <span class="op">*</span> <span class="va">p</span><span class="op">)</span>, nrow <span class="op">=</span> <span class="va">n</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">true_beta</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">p</span><span class="op">)</span>, ncol <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="va">y_vec</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/vector.html" class="external-link">as.vector</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">X</span><span class="op">[</span>,<span class="op">]</span> <span class="op"><a href="https://rdrr.io/r/base/matmult.html" class="external-link">%*%</a></span> <span class="va">true_beta</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu">bigmemory</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/bigmemory/man/big.matrix.html" class="external-link">big.matrix</a></span><span class="op">(</span>nrow <span class="op">=</span> <span class="va">n</span>, ncol <span class="op">=</span> <span class="fl">1</span>, type <span class="op">=</span> <span class="st">"double"</span><span class="op">)</span></span>
<span>    <span class="va">y</span><span class="op">[</span>,<span class="op">]</span> <span class="op">&lt;-</span> <span class="va">y_vec</span></span>
<span>    <span class="fu">bench</span><span class="fu">::</span><span class="fu"><a href="https://bench.r-lib.org/reference/mark.html" class="external-link">mark</a></span><span class="op">(</span></span>
<span>      dense <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense.html">pls1_dense</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y_vec</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      streaming <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense.html">pls1_stream</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y_vec</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, chunk_size <span class="op">=</span> <span class="fl">1024L</span>, </span>
<span>                              algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      dense_a <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense_a.html">pls1_dense_a</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      streaming_a <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense_a.html">pls1_stream_a</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, chunk_size <span class="op">=</span> <span class="fl">1024L</span>, </span>
<span>                                  algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      dense_ya <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense_ya.html">pls1_dense_ya</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      streaming_ya <span class="op">=</span> <span class="fu"><a href="../reference/pls1_dense_ya.html">pls1_stream_ya</a></span><span class="op">(</span><span class="va">X</span>, <span class="va">y</span>, ncomp <span class="op">=</span> <span class="va">ncomp</span>, chunk_size <span class="op">=</span> <span class="fl">1024L</span>, </span>
<span>                                    algorithm <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span>,</span>
<span>      iterations <span class="op">=</span> <span class="fl">10</span>,</span>
<span>      check <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>    <span class="op">)</span>  </span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="interpreting-the-output">Interpreting the output<a class="anchor" aria-label="anchor" href="#interpreting-the-output"></a>
</h2>
<p>The table summarises the timing and memory footprint of each solver.
In practice you can adjust the number of components, the chunk size or
the data generation process to mimic your own workload. When working
with file-backed matrices the streaming solver is often the only viable
option, whereas the dense solver remains the fastest choice for datasets
that comfortably fit in memory.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bench_res_simpls</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 54 × 8</span></span></span>
<span><span class="co">#&gt;    expression       n     p      min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;bch:expr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;bch:tm&gt;</span> <span style="color: #949494; font-style: italic;">&lt;bch:tm&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;bch:byt&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> dense          500   100   5.11ms   5.28ms     189.    199.4KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> streaming      500   100  26.68ms  26.74ms      37.3      49KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dense_a        500   100   4.67ms   4.71ms     212.     42.1KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> streaming_a    500   100  26.25ms  26.38ms      37.7    47.7KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> dense_ya       500   100   4.67ms   4.71ms     212.     43.5KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> streaming_ya   500   100  26.22ms  26.32ms      37.9    43.8KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> dense         <span style="text-decoration: underline;">1</span>000   100   8.57ms   8.73ms     114.     18.4KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> streaming     <span style="text-decoration: underline;">1</span>000   100  51.21ms  51.31ms      19.2    18.4KB     2.13</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> dense_a       <span style="text-decoration: underline;">1</span>000   100   8.23ms   8.29ms     120.     11.2KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> streaming_a   <span style="text-decoration: underline;">1</span>000   100  50.79ms  50.89ms      19.6    11.6KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 44 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bench_res_nipals</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 54 × 8</span></span></span>
<span><span class="co">#&gt;    expression       n     p      min   median `itr/sec` mem_alloc `gc/sec`</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;bch:expr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;bch:tm&gt;</span> <span style="color: #949494; font-style: italic;">&lt;bch:tm&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;bch:byt&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> dense          500   100   8.53ms   8.54ms     117.     34.7KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> streaming      500   100   8.53ms   8.53ms     117.     34.9KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> dense_a        500   100   6.56ms   6.58ms     152.     33.5KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> streaming_a    500   100   3.54ms   3.54ms     281.     53.4KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> dense_ya       500   100   8.55ms   8.56ms     117.     62.7KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> streaming_ya   500   100   8.55ms   8.56ms     117.     35.2KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> dense         <span style="text-decoration: underline;">1</span>000   100  16.99ms     17ms      58.8    50.8KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> streaming     <span style="text-decoration: underline;">1</span>000   100  16.98ms     17ms      58.8    50.8KB     6.53</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> dense_a       <span style="text-decoration: underline;">1</span>000   100  13.04ms  13.07ms      72.9    49.5KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> streaming_a   <span style="text-decoration: underline;">1</span>000   100   7.08ms   7.13ms     138.       89KB     0   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 44 more rows</span></span></span></code></pre></div>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bench_res_simpls</span>, type<span class="op">=</span><span class="st">"jitter"</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmarking-unnamed-chunk-5-1.png" width="1050"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bench_res_nipals</span>, type<span class="op">=</span><span class="st">"jitter"</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmarking-unnamed-chunk-6-1.png" width="1050"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bench_res_simpls</span>, type<span class="op">=</span><span class="st">"boxplot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmarking-unnamed-chunk-7-1.png" width="1050"></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">bench_res_nipals</span>, type<span class="op">=</span><span class="st">"boxplot"</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmarking-unnamed-chunk-8-1.png" width="1050"></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Frederic Bertrand, Myriam Maumy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
