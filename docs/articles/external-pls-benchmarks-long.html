<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>External PLS benchmarks for bigPLSR: detailed analysis • bigPLSR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="External PLS benchmarks for bigPLSR: detailed analysis">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">bigPLSR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/bigPLSR-auto-selection.html">Automatic Algorithm Selection in bigPLSR</a></li>
    <li><a class="dropdown-item" href="../articles/bigPLSR-kpls-streaming.html">Streaming Kernel PLS in bigPLSR: XX^T and Column-Chunked Variants</a></li>
    <li><a class="dropdown-item" href="../articles/bootstrap-strategies.html">Bootstrap strategies for bigPLSR</a></li>
    <li><a class="dropdown-item" href="../articles/cross-validation-ic.html">Cross-validation and Information Criteria in bigPLSR</a></li>
    <li><a class="dropdown-item" href="../articles/double-rkhs-pls.html">Double RKHS PLS (rkhs_xy): Theory and Usage</a></li>
    <li><a class="dropdown-item" href="../articles/external-pls-benchmarks-long.html">External PLS benchmarks for bigPLSR: detailed analysis</a></li>
    <li><a class="dropdown-item" href="../articles/external-pls-benchmarks-short.html">Benchmarking bigPLSR against external PLS implementations</a></li>
    <li><a class="dropdown-item" href="../articles/kf-pls.html">KF-PLS: Streaming PLS with Kalman-style updates</a></li>
    <li><a class="dropdown-item" href="../articles/klogitpls.html">Kernel Logistic PLS</a></li>
    <li><a class="dropdown-item" href="../articles/kpls_review.html">Kernel and Streaming PLS Methods in bigPLSR</a></li>
    <li><a class="dropdown-item" href="../articles/plotting-guide.html">Visualising PLS Fits with bigPLSR</a></li>
    <li><a class="dropdown-item" href="../articles/pls1-benchmark.html">Benchmarking PLS1 Implementations</a></li>
    <li><a class="dropdown-item" href="../articles/pls2-benchmark.html">Benchmarking PLS2 Implementations</a></li>
    <li><a class="dropdown-item" href="../articles/rkhs-overview.html">RKHS-based Algorithms in bigPLSR</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/fbertran/bigPLSR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>External PLS benchmarks for bigPLSR: detailed analysis</h1>
                        <h4 data-toc-skip class="author">Frédéric
Bertrand</h4>
            <address class="author_afil">
      Cedric, Cnam,
Paris<br><a class="author_email" href="mailto:#"></a><a href="mailto:frederic.bertrand@lecnam.net" class="email">frederic.bertrand@lecnam.net</a>
      </address>
                  
            <h4 data-toc-skip class="date">2025-11-18</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/fbertran/bigPLSR/blob/HEAD/vignettes/external-pls-benchmarks-long.Rmd" class="external-link"><code>vignettes/external-pls-benchmarks-long.Rmd</code></a></small>
      <div class="d-none name"><code>external-pls-benchmarks-long.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html" class="external-link">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span></span>
<span>  collapse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  comment  <span class="op">=</span> <span class="st">"#&gt;"</span>,</span>
<span>  fig.path <span class="op">=</span> <span class="st">"figures/benchmark-long-"</span>,</span>
<span>  fig.width  <span class="op">=</span> <span class="fl">6.5</span>,</span>
<span>  fig.height <span class="op">=</span> <span class="fl">4.5</span>,</span>
<span>  dpi <span class="op">=</span> <span class="fl">150</span>,</span>
<span>  message <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  warning <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">LOCAL</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"LOCAL"</span><span class="op">)</span>, <span class="st">"TRUE"</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette presents a more detailed analysis of the external
benchmarks stored in <code>external_pls_benchmarks</code>. The dataset
compares <code>bigPLSR</code> dense and streaming implementations to
reference PLS implementations available in other R packages.</p>
<p>The analysis is organised as follows.</p>
<ul>
<li>Section on the benchmark design and the structure of the
dataset.</li>
<li>Section on PLS1 behaviour, with emphasis on runtime and memory.</li>
<li>Section on PLS2 behaviour, including wide response settings.</li>
<li>Section comparing kernel based algorithms and wide kernel PLS.</li>
<li>Short discussion and take home messages.</li>
</ul>
<p>The code chunks are meant to be reproducible and can be adapted if
you update or extend the benchmark dataset.</p>
</div>
<div class="section level2">
<h2 id="benchmark-design-and-data-structure">Benchmark design and data structure<a class="anchor" aria-label="anchor" href="#benchmark-design-and-data-structure"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://fbertran.github.io/bigPLSR">bigPLSR</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://forcats.tidyverse.org/" class="external-link">forcats</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"external_pls_benchmarks"</span>, package <span class="op">=</span> <span class="st">"bigPLSR"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">external_pls_benchmarks</span><span class="op">)</span></span>
<span><span class="co">#&gt;   task algorithm            package median_time_s itr_per_sec mem_alloc_bytes</span></span>
<span><span class="co">#&gt; 1 pls1    simpls      bigPLSR_dense   0.006045184   165.15626          104720</span></span>
<span><span class="co">#&gt; 2 pls1    simpls bigPLSR_big.memory   0.003586762   275.94176          895872</span></span>
<span><span class="co">#&gt; 3 pls1    simpls                pls   0.002086736   469.94316         7479024</span></span>
<span><span class="co">#&gt; 4 pls1    simpls           mixOmics   0.004478861   223.44869         7550384</span></span>
<span><span class="co">#&gt; 5 pls1 kernelpls      bigPLSR_dense   0.044123503    22.66366        42461256</span></span>
<span><span class="co">#&gt; 6 pls1 kernelpls bigPLSR_big.memory   0.000521520  1733.62898          821328</span></span>
<span><span class="co">#&gt;      n   p q ncomp                                     notes</span></span>
<span><span class="co">#&gt; 1 1000 100 1     1      Run via pls_fit() with dense backend</span></span>
<span><span class="co">#&gt; 2 1000 100 1     1 Run via pls_fit() with big.memory backend</span></span>
<span><span class="co">#&gt; 3 1000 100 1     1                  Requires the pls package</span></span>
<span><span class="co">#&gt; 4 1000 100 1     1             Requires the mixOmics package</span></span>
<span><span class="co">#&gt; 5 1000 100 1     1      Run via pls_fit() with dense backend</span></span>
<span><span class="co">#&gt; 6 1000 100 1     1 Run via pls_fit() with big.memory backend</span></span></code></pre></div>
<p>The key factors are:</p>
<ul>
<li>
<code>task</code>: PLS1 versus PLS2,</li>
<li>
<code>algorithm</code>: SIMPLS, NIPALS, kernel PLS or wide kernel
PLS,</li>
<li>
<code>package</code>: implementation provider,</li>
<li>
<code>n</code>, <code>p</code>, <code>q</code>: data
dimensions,</li>
<li>
<code>ncomp</code>: number of extracted components.</li>
</ul>
<p>The performance measures are:</p>
<ul>
<li>
<code>median_time_s</code> and <code>itr_per_sec</code> for
runtime,</li>
<li>
<code>mem_alloc_bytes</code> for memory consumption as reported by
<code><a href="https://bench.r-lib.org/reference/mark.html" class="external-link">bench::mark</a></code>.</li>
</ul>
<p>For the analyses below it is convenient to add a few helper
variables.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bench</span> <span class="op">&lt;-</span> <span class="va">external_pls_benchmarks</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    mem_mib      <span class="op">=</span> <span class="va">mem_alloc_bytes</span> <span class="op">/</span> <span class="fl">1024</span><span class="op">^</span><span class="fl">2</span>,</span>
<span>    log_time     <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="va">median_time_s</span><span class="op">)</span>,</span>
<span>    log_mem_mib  <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html" class="external-link">log10</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="va">mem_mib</span>, <span class="fl">1e-6</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    impl         <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">package</span>, <span class="va">algorithm</span>, sep <span class="op">=</span> <span class="st">"::"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p>We will often work conditionally on <code>task</code>,
<code>n</code>, <code>p</code>, <code>q</code> and <code>ncomp</code> in
order to compare implementations on exactly the same configurations.</p>
</div>
<div class="section level2">
<h2 id="pls1-dense-versus-streaming">PLS1: dense versus streaming<a class="anchor" aria-label="anchor" href="#pls1-dense-versus-streaming"></a>
</h2>
<div class="section level3">
<h3 id="fixed-size-varying-number-of-components">Fixed size, varying number of components<a class="anchor" aria-label="anchor" href="#fixed-size-varying-number-of-components"></a>
</h3>
<p>We first focus on PLS1 problems and fix a representative data size.
You can adjust the selection below depending on the contents of your
benchmark runs.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pls1_sizes</span> <span class="op">&lt;-</span> <span class="va">bench</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">task</span> <span class="op">==</span> <span class="st">"pls1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">p</span>, <span class="va">q</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pls1_sizes</span></span>
<span><span class="co">#&gt;       n     p q nn</span></span>
<span><span class="co">#&gt; 1  1000   100 1 48</span></span>
<span><span class="co">#&gt; 2 10000  1000 1 48</span></span>
<span><span class="co">#&gt; 3   100  5000 1 16</span></span>
<span><span class="co">#&gt; 4  1000 50000 1 16</span></span></code></pre></div>
<p>For illustration we take the most frequent <code>(n, p, q)</code>
triple and look at runtime as a function of <code>ncomp</code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">size_pls1</span> <span class="op">&lt;-</span> <span class="va">pls1_sizes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1L</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">p</span>, <span class="va">q</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pls1_subset</span> <span class="op">&lt;-</span> <span class="va">bench</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="va">size_pls1</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"p"</span>, <span class="st">"q"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">task</span> <span class="op">==</span> <span class="st">"pls1"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">pls1_subset</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ncomp</span>, y <span class="op">=</span> <span class="va">median_time_s</span>,</span>
<span>           colour <span class="op">=</span> <span class="va">package</span>, linetype <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Number of components"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Median runtime (seconds, log scale)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"PLS1: fixed data size, varying components"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmark-long-unnamed-chunk-6-1.png" width="975"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">pls1_subset</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ncomp</span>, y <span class="op">=</span> <span class="va">mem_mib</span>,</span>
<span>           colour <span class="op">=</span> <span class="va">package</span>, linetype <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Number of components"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Memory allocated (MiB)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"PLS1: fixed data size, memory behaviour"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmark-long-unnamed-chunk-7-1.png" width="975"></p>
<p>These plots allow you to compare how dense <code>bigPLSR</code>
backends and competitors scale as the number of latent components
increases, without mixing problem sizes.</p>
</div>
<div class="section level3">
<h3 id="relative-speed-and-memory-ratios">Relative speed and memory ratios<a class="anchor" aria-label="anchor" href="#relative-speed-and-memory-ratios"></a>
</h3>
<p>To better understand the relative behaviour we compute ratios with
respect to a chosen reference implementation, for example
<code>pls::simpls</code> when it is available in the dataset.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">reference_impl</span> <span class="op">&lt;-</span> <span class="st">"pls::simpls"</span></span>
<span></span>
<span><span class="co">## 1) Reference rows for pls1</span></span>
<span><span class="va">refs_pls1</span> <span class="op">&lt;-</span> <span class="va">bench</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">task</span> <span class="op">==</span> <span class="st">"pls1"</span>, <span class="va">impl</span> <span class="op">==</span> <span class="va">reference_impl</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span></span>
<span>    <span class="va">n</span>, <span class="va">p</span>, <span class="va">q</span>, <span class="va">ncomp</span>,</span>
<span>    time_ref <span class="op">=</span> <span class="va">median_time_s</span>,</span>
<span>    mem_ref  <span class="op">=</span> <span class="va">mem_mib</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co">## 2) Join and compute ratios (only where a reference exists)</span></span>
<span><span class="va">ratios_pls1</span> <span class="op">&lt;-</span> <span class="va">bench</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">task</span> <span class="op">==</span> <span class="st">"pls1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">refs_pls1</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"p"</span>, <span class="st">"q"</span>, <span class="st">"ncomp"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">time_ref</span><span class="op">)</span>, <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">mem_ref</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    rel_time <span class="op">=</span> <span class="va">median_time_s</span> <span class="op">/</span> <span class="va">time_ref</span>,</span>
<span>    rel_mem  <span class="op">=</span> <span class="va">mem_mib</span>      <span class="op">/</span> <span class="va">mem_ref</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">ratios_pls1</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">impl</span>, y <span class="op">=</span> <span class="va">rel_time</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, colour <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Implementation"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Runtime ratio vs reference (log scale)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"PLS1: runtime ratios relative to pls::simpls"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmark-long-unnamed-chunk-8-1.png" width="975"></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">ratios_pls1</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">impl</span>, y <span class="op">=</span> <span class="va">rel_mem</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">1</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, colour <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html" class="external-link">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html" class="external-link">coord_flip</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Implementation"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Memory ratio vs reference (log scale)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"PLS1: memory ratios relative to pls::simpls"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmark-long-unnamed-chunk-9-1.png" width="975"></p>
<p>These figures help to answer questions such as:</p>
<ul>
<li>How close is dense <code>bigPLSR</code> SIMPLS to classical
implementations in terms of runtime for a given problem regime.</li>
<li>For which domains the big memory streaming backends give substantial
memory savings relative to fully dense algorithms.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="pls2-multiple-responses">PLS2: multiple responses<a class="anchor" aria-label="anchor" href="#pls2-multiple-responses"></a>
</h2>
<div class="section level3">
<h3 id="fixed-size-varying-number-of-components-1">Fixed size, varying number of components<a class="anchor" aria-label="anchor" href="#fixed-size-varying-number-of-components-1"></a>
</h3>
<p>We now repeat the same type of analysis for PLS2 configurations.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pls2_sizes</span> <span class="op">&lt;-</span> <span class="va">bench</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">task</span> <span class="op">==</span> <span class="st">"pls2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">p</span>, <span class="va">q</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pls2_sizes</span></span>
<span><span class="co">#&gt;       n     p   q nn</span></span>
<span><span class="co">#&gt; 1  1000   100  10 48</span></span>
<span><span class="co">#&gt; 2  1000   100 100 48</span></span>
<span><span class="co">#&gt; 3 10000  1000  10 48</span></span>
<span><span class="co">#&gt; 4 10000  1000 100 48</span></span>
<span><span class="co">#&gt; 5   100  5000  10 16</span></span>
<span><span class="co">#&gt; 6   100  5000 100 16</span></span>
<span><span class="co">#&gt; 7  1000 50000  10 16</span></span>
<span><span class="co">#&gt; 8  1000 50000 100 16</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">size_pls2</span> <span class="op">&lt;-</span> <span class="va">pls2_sizes</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1L</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">p</span>, <span class="va">q</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pls2_subset</span> <span class="op">&lt;-</span> <span class="va">bench</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="va">size_pls2</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"p"</span>, <span class="st">"q"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">task</span> <span class="op">==</span> <span class="st">"pls2"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">pls2_subset</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ncomp</span>, y <span class="op">=</span> <span class="va">median_time_s</span>,</span>
<span>           colour <span class="op">=</span> <span class="va">package</span>, linetype <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Number of components"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Median runtime (seconds, log scale)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"PLS2: fixed data size, varying components"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmark-long-unnamed-chunk-12-1.png" width="975"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">pls2_subset</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">ncomp</span>, y <span class="op">=</span> <span class="va">mem_mib</span>,</span>
<span>           colour <span class="op">=</span> <span class="va">package</span>, linetype <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Number of components"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Memory allocated (MiB)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"PLS2: fixed data size, memory behaviour"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmark-long-unnamed-chunk-13-1.png" width="975"></p>
</div>
<div class="section level3">
<h3 id="influence-of-the-number-of-responses">Influence of the number of responses<a class="anchor" aria-label="anchor" href="#influence-of-the-number-of-responses"></a>
</h3>
<p>When <code>q</code> grows, some implementations may move from a
predictor limited regime to a response limited regime. The dataset
allows you to explore this by fixing <code>n</code> and <code>p</code>
and varying <code>q</code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pls2_q_grid</span> <span class="op">&lt;-</span> <span class="va">bench</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">task</span> <span class="op">==</span> <span class="st">"pls2"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html" class="external-link">count</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">p</span>, <span class="va">q</span>, sort <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pls2_q_grid</span><span class="op">)</span></span>
<span><span class="co">#&gt;       n    p   q nn</span></span>
<span><span class="co">#&gt; 1  1000  100  10 48</span></span>
<span><span class="co">#&gt; 2  1000  100 100 48</span></span>
<span><span class="co">#&gt; 3 10000 1000  10 48</span></span>
<span><span class="co">#&gt; 4 10000 1000 100 48</span></span>
<span><span class="co">#&gt; 5   100 5000  10 16</span></span>
<span><span class="co">#&gt; 6   100 5000 100 16</span></span></code></pre></div>
<p>You can adapt the following code to one or several grids of
interest.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">grid_example</span> <span class="op">&lt;-</span> <span class="va">pls2_q_grid</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1L</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">n</span>, <span class="va">p</span><span class="op">)</span></span>
<span></span>
<span><span class="va">pls2_q_subset</span> <span class="op">&lt;-</span> <span class="va">bench</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter-joins.html" class="external-link">semi_join</a></span><span class="op">(</span><span class="va">grid_example</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"n"</span>, <span class="st">"p"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">task</span> <span class="op">==</span> <span class="st">"pls2"</span>, <span class="va">ncomp</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">ncomp</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">pls2_q_subset</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">q</span>, y <span class="op">=</span> <span class="va">median_time_s</span>,</span>
<span>           colour <span class="op">=</span> <span class="va">package</span>, linetype <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Number of responses q"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Median runtime (seconds, log scale)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"PLS2: influence of q at fixed n and p"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmark-long-unnamed-chunk-15-1.png" width="975"></p>
</div>
</div>
<div class="section level2">
<h2 id="kernel-and-wide-kernel-pls">Kernel and wide kernel PLS<a class="anchor" aria-label="anchor" href="#kernel-and-wide-kernel-pls"></a>
</h2>
<p>Kernel based algorithms are available in both dense and wide kernel
flavours. They are often more sensitive to the number of observations
than linear PLS, because they rely on Gram matrices of size
<code>n x n</code>.</p>
<p>Here we restrict the dataset to kernel based algorithms for visual
clarity.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">bench_kernel</span> <span class="op">&lt;-</span> <span class="va">bench</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">algorithm</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"kernelpls"</span>, <span class="st">"widekernelpls"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Example plot for PLS1:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">kern_pls1</span> <span class="op">&lt;-</span> <span class="va">bench_kernel</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">task</span> <span class="op">==</span> <span class="st">"pls1"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">kern_pls1</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">n</span>, y <span class="op">=</span> <span class="va">median_time_s</span>,</span>
<span>           colour <span class="op">=</span> <span class="va">package</span>, linetype <span class="op">=</span> <span class="va">algorithm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Number of observations n"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Median runtime (seconds, log scale)"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Kernel PLS1: scaling with n"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="figures/benchmark-long-unnamed-chunk-17-1.png" width="975"></p>
<p>You can build similar plots for memory and for the PLS2 task. They
make it easy to check whether kernel implementations scale in the
expected way for your data regimes.</p>
</div>
<div class="section level2">
<h2 id="discussion-and-practical-guidance">Discussion and practical guidance<a class="anchor" aria-label="anchor" href="#discussion-and-practical-guidance"></a>
</h2>
<p>The figures in this vignette illustrate a few practical messages.</p>
<ul>
<li>On moderate dense problems where <code>n</code> and <code>p</code>
fit comfortably in memory, <code>bigPLSR</code> dense SIMPLS can be used
as a drop in alternative to classical PLS implementations. Runtime is
usually close in practice and the code keeps the possibility of
switching to streaming if required later.</li>
<li>On large sample sizes, the big memory streaming backends avoid
allocating dense score matrices when <code>scores = "none"</code> and
keep memory bounded with respect to <code>n</code>. This is particularly
relevant for PLS2 and kernel based methods.</li>
<li>Kernel PLS algorithms may benefit from careful choice of kernel
parameters and from backends that reduce the memory footprint of
<code>n x n</code> Gram matrices. The design of <code>bigPLSR</code>
keeps these extensions in mind.</li>
</ul>
<p>The benchmark dataset is part of the package so that the evidence
behind these statements remains transparent and reproducible. You can
extend the benchmarks with your own tasks and regenerate the figures by
simply adding rows to <code>external_pls_benchmarks</code>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Frederic Bertrand, Myriam Maumy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
